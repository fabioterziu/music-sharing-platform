<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import java.net.URL?>

<!--VISTA COMPONENTE CARICA BRANO -->

<VBox xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.appmusicale.controller.member.topbar.UploadTrackController"
      spacing="20" style="-fx-background-color: #f5f7fa; -fx-padding: 20;" alignment="CENTER" >

    <stylesheets>
        <URL value="@../../../css/style.css" />
    </stylesheets>

    <!-- Container per messaggi di successo -->
    <VBox fx:id="successContainer" visible="false" managed="false" alignment="CENTER"
          style="-fx-background-color: #d4edda; -fx-background-radius: 5; -fx-padding: 10; -fx-spacing: 5;">
        <Label fx:id="successLabel" style="-fx-text-fill: #155724; -fx-font-weight: bold;" />
    </VBox>

    <!-- Container per messaggi di errore generale -->
    <VBox fx:id="errorContainer" visible="false" managed="false" alignment="CENTER"
          style="-fx-background-color: #f8d7da; -fx-background-radius: 5; -fx-padding: 10; -fx-spacing: 5;">
        <Label fx:id="generalErrorLabel" style="-fx-text-fill: #721c24; -fx-font-weight: bold;" />
    </VBox>

    <HBox spacing="20" alignment="CENTER" >

        <!-- Form di caricamento a sinistra -->
        <VBox spacing="20" alignment="TOP_LEFT" style="-fx-background-color: white;
               -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" prefWidth="400" >
            <Label text="Carica un Brano" style="-fx-text-fill: #2c3e50; -fx-font-size: 24px; -fx-font-weight: bold;" />

            <GridPane hgap="10" vgap="15" >
                <columnConstraints>
                    <ColumnConstraints prefWidth="150" />
                    <ColumnConstraints prefWidth="250" />
                </columnConstraints>

                <!-- Titolo -->
                <Label text="Titolo *" GridPane.rowIndex="0" GridPane.columnIndex="0"
                       style="-fx-text-fill: #2c3e50; -fx-font-weight: bold;" />
                <TextField fx:id="titleField" promptText="Inserisci Titolo" GridPane.rowIndex="0" GridPane.columnIndex="1" onKeyReleased="#onTitleChanged"/>
                <Label fx:id="titleErrorLabel" style="-fx-text-fill: #dc3545; -fx-font-size: 12px;"
                       GridPane.rowIndex="0" GridPane.columnIndex="1" GridPane.valignment="BOTTOM"
                       visible="false" managed="false" />

                <!-- Artista -->
                <Label text="Artista *" GridPane.rowIndex="1" GridPane.columnIndex="0"
                       style="-fx-text-fill: #2c3e50; -fx-font-weight: bold;" />
                <TextField fx:id="authorField" promptText="Inserisci Artista" GridPane.rowIndex="1" GridPane.columnIndex="1" onKeyReleased="#onArtistChanged" />
                <Label fx:id="authorErrorLabel" style="-fx-text-fill: #dc3545; -fx-font-size: 12px;"
                       GridPane.rowIndex="1" GridPane.columnIndex="1" GridPane.valignment="BOTTOM"
                       visible="false" managed="false" />

                <!-- Anno -->
                <Label text="Anno *" GridPane.rowIndex="2" GridPane.columnIndex="0"
                       style="-fx-text-fill: #2c3e50; -fx-font-weight: bold;" />
                <TextField fx:id="yearField" promptText="Inserisci Anno" GridPane.rowIndex="2" GridPane.columnIndex="1" onKeyReleased="#onYearChanged"/>
                <Label fx:id="yearErrorLabel" style="-fx-text-fill: #dc3545; -fx-font-size: 12px;"
                       GridPane.rowIndex="2" GridPane.columnIndex="1" GridPane.valignment="BOTTOM"
                       visible="false" managed="false" />

                <!-- Genere -->
                <Label text="Genere *" GridPane.rowIndex="3" GridPane.columnIndex="0"
                       style="-fx-text-fill: #2c3e50; -fx-font-weight: bold;" />
                <ComboBox fx:id="genreComboBox" promptText="Seleziona genere" GridPane.rowIndex="3" GridPane.columnIndex="1" onAction="#onGenreSelected"/>
                <Label fx:id="genreErrorLabel" style="-fx-text-fill: #dc3545; -fx-font-size: 12px;"
                       GridPane.rowIndex="3" GridPane.columnIndex="1" GridPane.valignment="BOTTOM"
                       visible="false" managed="false" />

                <!-- Esecutori -->
                <Label text="Esecutori" GridPane.rowIndex="4" GridPane.columnIndex="0"
                       style="-fx-text-fill: #2c3e50;" />
                <TextField fx:id="performersField" promptText="Inserisci esecutore/i separati da ," GridPane.rowIndex="4" GridPane.columnIndex="1" />

                <!-- Strumento -->
                <Label text="Strumenti" GridPane.rowIndex="5" GridPane.columnIndex="0"
                       style="-fx-text-fill: #2c3e50;" />
                <TextField fx:id="instrumentsField" promptText="Inserisci strumenti" GridPane.rowIndex="5" GridPane.columnIndex="1" />
                <Label fx:id="instrumentErrorLabel" style="-fx-text-fill: #dc3545; -fx-font-size: 12px;" wrapText="true"
                       GridPane.rowIndex="5" GridPane.columnIndex="1"
                       visible="false" managed="false" mouseTransparent="true" />

                <!-- Link youtube -->
                <Label text="Link Youtube" GridPane.rowIndex="6" GridPane.columnIndex="0"
                       style="-fx-text-fill: #2c3e50;" />
                <TextField fx:id="youtubeField" promptText="https://youtube.com/..." GridPane.rowIndex="6" GridPane.columnIndex="1" onKeyReleased="#onYoutubeChanged"/>
                <Label fx:id="youtubeErrorLabel" style="-fx-text-fill: #dc3545; -fx-font-size: 12px;"
                       GridPane.rowIndex="6" GridPane.columnIndex="1"
                       visible="false" managed="false" mouseTransparent="true"  />

            </GridPane>

            <HBox spacing="15" alignment="BOTTOM_RIGHT" >
                <Button fx:id="attachFileButton" text="Allega Copertina" styleClass="primary-button" onAction="#handleAttachFile" />
                <Button fx:id="uploadButton" text="Carica" styleClass="confirm-button" onAction="#handleUpload" />
            </HBox>

        </VBox>

        <!-- Anteprima a destra -->
        <VBox spacing="20" alignment="TOP_CENTER" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" prefWidth="300">
            <Label text="Anteprima" style="-fx-text-fill: #2c3e50; -fx-font-size: 24px; -fx-font-weight: bold;"/>

            <StackPane style="-fx-background-color: #e8f4f8; -fx-background-radius: 10; -fx-min-width: 200; -fx-min-height: 200;">
                <ImageView fx:id="coverPreview" fitWidth="180" fitHeight="180" preserveRatio="true" visible="false"/>
                <Label text="Nessuna copertina" style="-fx-text-fill: #7f8c8d; -fx-font-style: italic;"
                       fx:id="noCoverLabel"/>
            </StackPane>

            <VBox spacing="5" alignment="CENTER">
                <Label fx:id="previewTitle" text="Titolo del track"
                       style="-fx-text-fill: #2c3e50; -fx-font-size: 16px; -fx-font-weight: bold; -fx-wrap-text: true; -fx-alignment: center;"/>
                <Label fx:id="previewAuthor" text="Artista"
                       style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px; -fx-wrap-text: true; -fx-alignment: center;"/>
            </VBox>
        </VBox>

    </HBox>

</VBox>

